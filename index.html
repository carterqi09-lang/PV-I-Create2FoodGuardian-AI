<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FoodGuardian AI | æ™ºèƒ½é˜²æµªè´¹é£Ÿè°±åŠ©æ‰‹</title>
    <style>
        :root {
            --warm-orange: #FF8C42;
            --soft-yellow: #FFD166;
            --fresh-green: #06D6A0;
            --cream-white: #FFF9F0;
            --warm-brown: #8B5A2B;
            --light-orange: #FFB347;
        }
        
        * { 
            margin: 0; 
            padding: 0; 
            box-sizing: border-box; 
        }
        
        body {
            font-family: 'Segoe UI', 'PingFang SC', 'Microsoft YaHei', sans-serif;
            line-height: 1.6;
            color: var(--warm-brown);
            background: linear-gradient(135deg, #fff9f0 0%, #ffe8d6 100%);
            min-height: 100vh;
        }
        
        .container { 
            max-width: 1200px; 
            margin: 0 auto; 
            padding: 0 20px; 
        }
        
        /* è¯­è¨€åˆ‡æ¢å™¨ */
        .language-switcher {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }
        
        .lang-btn {
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid var(--soft-yellow);
            border-radius: 20px;
            padding: 8px 16px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
            backdrop-filter: blur(10px);
        }
        
        .lang-btn:hover {
            background: white;
            border-color: var(--fresh-green);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .lang-options {
            position: absolute;
            top: 100%;
            right: 0;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            padding: 10px 0;
            margin-top: 5px;
            display: none;
            min-width: 120px;
        }
        
        .lang-option {
            padding: 8px 15px;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .lang-option:hover {
            background: #f5f5f5;
        }
        
        .lang-options.show {
            display: block;
        }
        
        /* å¯¼èˆªæ  */
        header {
            background: linear-gradient(135deg, var(--warm-orange) 0%, var(--light-orange) 100%);
            padding: 1rem 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo-section {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            color: white;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.2);
        }
        
        .team-name {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 0.5rem 1.5rem;
            border-radius: 20px;
            font-weight: bold;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        /* æ¬¢è¿ç•Œé¢ */
        .welcome-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 80vh;
        }
        
        .welcome-card {
            background: white;
            border-radius: 20px;
            padding: 3rem;
            box-shadow: 0 10px 30px rgba(255, 140, 66, 0.1);
            border: 1px solid rgba(255, 140, 66, 0.1);
            max-width: 500px;
            width: 100%;
            text-align: center;
        }
        
        .welcome-card h1 {
            color: var(--warm-orange);
            margin-bottom: 1rem;
        }
        
        /* é¡µé¢åˆ‡æ¢æŒ‰é’® */
        .page-switcher {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 2rem 0;
        }
        
        .page-btn {
            padding: 1rem 2rem;
            background: linear-gradient(135deg, var(--fresh-green) 0%, #06C290 100%);
            color: white;
            border: none;
            border-radius: 50px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(6, 214, 160, 0.3);
            font-size: 1.1rem;
        }
        
        .page-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(6, 214, 160, 0.4);
        }
        
        .page-btn.secondary {
            background: linear-gradient(135deg, var(--warm-orange) 0%, var(--light-orange) 100%);
        }
        
        /* é¡µé¢å†…å®¹ */
        .page {
            display: none;
            animation: fadeIn 0.5s ease-out;
        }
        
        .page.active {
            display: block;
        }
        
        /* è‹±é›„åŒºåŸŸ */
        .hero {
            text-align: center;
            padding: 3rem 0 2rem;
            color: var(--warm-brown);
        }
        
        .hero h1 {
            font-size: 2.8rem;
            margin-bottom: 1rem;
            color: var(--warm-orange);
        }
        
        .hero p {
            font-size: 1.2rem;
            max-width: 600px;
            margin: 0 auto 2rem;
        }
        
        /* å¡ç‰‡ */
        .card {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            margin: 2rem 0;
            box-shadow: 0 10px 30px rgba(255, 140, 66, 0.1);
            border: 1px solid rgba(255, 140, 66, 0.1);
        }
        
        /* è¡¨å•å…ƒç´  */
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 2px solid var(--soft-yellow);
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--fresh-green);
            box-shadow: 0 0 0 3px rgba(6, 214, 160, 0.1);
        }
        
        /* æ»‘åŠ¨æ¡ */
        .slider {
            -webkit-appearance: none;
            width: 100%;
            height: 10px;
            border-radius: 5px;
            background: linear-gradient(to right, var(--soft-yellow), var(--warm-orange));
            outline: none;
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background: var(--fresh-green);
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        .slider-value {
            text-align: center;
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--warm-orange);
            margin-top: 0.5rem;
        }
        
        /* æŒ‰é’® */
        .btn {
            display: inline-block;
            padding: 1rem 2rem;
            background: linear-gradient(135deg, var(--fresh-green) 0%, #06C290 100%);
            color: white;
            text-decoration: none;
            border-radius: 50px;
            font-weight: bold;
            border: none;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(6, 214, 160, 0.3);
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(6, 214, 160, 0.4);
        }
        
        .view-recipe-btn {
            background: linear-gradient(135deg, var(--warm-orange) 0%, var(--light-orange) 100%);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: 500;
            cursor: pointer;
            margin-top: 0.5rem;
            transition: all 0.3s;
        }
        
        .view-recipe-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(255, 140, 66, 0.3);
        }
        
        /* ç»“æœå±•ç¤º */
        .result-card {
            background: linear-gradient(135deg, #fff9f0 0%, #fff0e0 100%);
            border-radius: 15px;
            padding: 1.5rem;
            margin-top: 1.5rem;
            border-left: 5px solid var(--fresh-green);
        }
        
        .ingredient-item {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 0;
            border-bottom: 1px dashed rgba(139, 90, 43, 0.1);
        }
        
        /* æ’è¡Œæ¦œæ ·å¼ */
        .leaderboard {
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            margin-top: 2rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        
        .leaderboard-item {
            display: flex;
            align-items: center;
            padding: 0.8rem;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .leaderboard-item:last-child {
            border-bottom: none;
        }
        
        .rank {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: var(--fresh-green);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
        }
        
        .rank-1 { background: #FFD700; }
        .rank-2 { background: #C0C0C0; }
        .rank-3 { background: #CD7F32; }
        
        .user-info {
            flex: 1;
        }
        
        .user-name {
            font-weight: bold;
        }
        
        .waste-amount {
            color: var(--fresh-green);
            font-weight: bold;
        }
        
        .timestamp {
            font-size: 0.8rem;
            color: #999;
        }
        
        /* ç¯ä¿å½±å“ç½‘æ ¼ */
        .impact-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }
        
        .impact-item {
            text-align: center;
            padding: 1rem;
            background: white;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.08);
        }
        
        .impact-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--fresh-green);
        }
        
        /* å¨ä½™åˆ©ç”¨å»ºè®® */
        .food-waste-tips {
            background: linear-gradient(135deg, #e8f5e9, #c8e6c9);
            border-radius: 10px;
            padding: 1.5rem;
            margin-top: 1.5rem;
        }
        
        .tip-item {
            margin-bottom: 1rem;
            padding-left: 1.5rem;
            position: relative;
        }
        
        .tip-item:before {
            content: "ğŸ’¡";
            position: absolute;
            left: 0;
        }
        
        /* å¨ä½™å†åˆ©ç”¨é£Ÿè°± */
        .reuse-recipe {
            background: linear-gradient(135deg, #fff0e0, #ffe8d6);
            border-radius: 10px;
            padding: 1.5rem;
            margin-top: 1rem;
            border-left: 4px solid var(--warm-orange);
            display: none;
        }
        
        .reuse-recipe.show {
            display: block;
            animation: slideDown 0.3s ease-out;
        }
        
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .hero h1 { font-size: 2.2rem; }
            .container { padding: 0 15px; }
            .page-switcher { flex-direction: column; }
            .impact-grid { grid-template-columns: 1fr; }
            .welcome-card { padding: 2rem 1.5rem; }
        }
        
        /* åŠ¨ç”» */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.6s ease-out;
        }
        
        /* åŠ è½½åŠ¨ç”» */
        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(255, 140, 66, 0.2);
            border-top: 4px solid var(--warm-orange);
            border-radius: 50%;
            margin: 0 auto;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* é¡µè„š */
        footer {
            text-align: center;
            padding: 2rem 0;
            color: #666;
            border-top: 1px solid #eee;
            margin-top: 3rem;
        }
    </style>
</head>
<body>
    <!-- è¯­è¨€åˆ‡æ¢å™¨ -->
    <div class="language-switcher">
        <button class="lang-btn" id="languageBtn">
            <span>ğŸŒ ç®€ä½“ä¸­æ–‡</span>
        </button>
        <div class="lang-options" id="langOptions">
            <div class="lang-option" data-lang="zh">ç®€ä½“ä¸­æ–‡</div>
            <div class="lang-option" data-lang="en">English</div>
        </div>
    </div>

    <!-- æ¬¢è¿ç•Œé¢ -->
    <div id="welcome" class="welcome-container">
        <div class="welcome-card fade-in">
            <h1 id="welcomeTitle">æ¬¢è¿ä½¿ç”¨ FoodGuardian AI</h1>
            <p id="welcomeSubtitle">è¯·è¾“å…¥æ‚¨çš„æ˜µç§°ï¼ŒåŠ å…¥æˆ‘ä»¬çš„é˜²æµªè´¹è¡ŒåŠ¨</p>
            
            <div class="form-group" style="margin-top: 2rem;">
                <label id="usernameLabel">æ‚¨çš„æ˜µç§°ï¼ˆç”¨äºæ’è¡Œæ¦œï¼‰</label>
                <input type="text" id="usernameInput" placeholder="è¯·è¾“å…¥æ‚¨çš„æ˜µç§°" style="text-align: center;">
                <p id="usernameHint" style="color: #666; font-size: 0.9rem; margin-top: 0.5rem;">æ˜µç§°å°†æ˜¾ç¤ºåœ¨æ’è¡Œæ¦œä¸­</p>
            </div>
            
            <button onclick="registerUser()" class="btn" id="enterBtn" style="width: 100%; margin-top: 1.5rem;">è¿›å…¥ç½‘ç«™</button>
            
            <div class="result-card" style="margin-top: 2rem;">
                <h3 id="howToTitle">å¦‚ä½•å‚ä¸ï¼Ÿ</h3>
                <p id="howToStep1">1. è¾“å…¥æ‚¨çš„æ˜µç§°</p>
                <p id="howToStep2">2. ä½¿ç”¨æ™ºèƒ½é£Ÿè°±ç”Ÿæˆå™¨</p>
                <p id="howToStep3">3. ç³»ç»Ÿè®¡ç®—æ‚¨å‡å°‘çš„æµªè´¹é‡</p>
                <p id="howToStep4">4. åœ¨æ’è¡Œæ¦œä¸­æŸ¥çœ‹æ‚¨çš„æ’å</p>
            </div>
        </div>
    </div>

    <!-- å¯¼èˆªæ  -->
    <header>
        <nav class="container">
            <div class="logo-section">
                <div class="logo">ğŸ FoodGuardian AI</div>
                <div class="team-name">CMMMMC | I-Create2</div>
            </div>
        </nav>
    </header>

    <!-- ä¸»ç½‘ç«™å†…å®¹ -->
    <div id="mainContent" style="display: none;">
        <!-- é¡µé¢åˆ‡æ¢æŒ‰é’® -->
        <div class="container page-switcher">
            <button class="page-btn" data-page="generator">æ™ºèƒ½é£Ÿè°±ç”Ÿæˆå™¨</button>
            <button class="page-btn secondary" data-page="leaderboard">æŸ¥çœ‹æ’è¡Œæ¦œ</button>
        </div>

        <!-- ç¬¬ä¸€é¡µï¼šæ™ºèƒ½é£Ÿè°±ç”Ÿæˆå™¨ -->
        <div id="generator" class="page active">
            <section class="hero">
                <div class="container">
                    <h1 id="heroTitle">æ™ºèƒ½é£Ÿç‰©æµªè´¹å‡å°‘</h1>
                    <p id="heroSubtitle">AIé©±åŠ¨çš„é£Ÿè°±è®¡ç®—å™¨ï¼Œé€šè¿‡ç²¾å‡†ä»½é‡é˜²æ­¢æµªè´¹</p>
                </div>
            </section>

            <section class="container">
                <div class="card fade-in">
                    <h2 id="generatorTitle">æ™ºèƒ½é£Ÿè°±ç”Ÿæˆå™¨</h2>
                    
                    <div class="form-group">
                        <label id="currentUserLabel">å½“å‰ç”¨æˆ·ï¼š<span id="currentUser" style="color: var(--warm-orange); font-weight: bold;"></span></label>
                    </div>
                    
                    <div class="form-group">
                        <label id="peopleLabel">ç”¨é¤äººæ•°</label>
                        <input type="range" min="1" max="20" value="4" class="slider" id="peopleSlider">
                        <div class="slider-value"><span id="peopleValue">4</span> <span id="peopleUnit">äºº</span></div>
                    </div>
                    
                    <div class="form-group">
                        <label id="mealLabel">ç”¨é¤ç±»å‹</label>
                        <select id="mealType">
                            <option value="homecooking">å®¶å¸¸èœ</option>
                            <option value="healthy">å¥åº·å‡è„‚é¤</option>
                            <option value="vegetarian">ç´ é£Ÿ</option>
                            <option value="feast">å®´å®¢èœ</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label id="ingredientLabel">ä¸»è¦é£Ÿæ</label>
                        <select id="ingredientSelect">
                            <option value="tomato">ç•ªèŒ„</option>
                            <option value="chicken">é¸¡èƒ¸è‚‰</option>
                            <option value="potato">åœŸè±†</option>
                            <option value="egg">é¸¡è›‹</option>
                            <option value="beef">ç‰›è‚‰</option>
                            <option value="fish">é±¼</option>
                        </select>
                    </div>
                    
                    <button onclick="generateRecipe()" class="btn" id="generateButton">ç”Ÿæˆæ™ºèƒ½é£Ÿè°±</button>
                    
                    <div id="recipeResult">
                        <p id="recipePlaceholder" style="text-align: center; color: #666;">å¡«å†™ä»¥ä¸Šä¿¡æ¯ï¼Œç‚¹å‡»ç”Ÿæˆè·å¾—ä¸ªæ€§åŒ–é£Ÿè°±</p>
                    </div>
                </div>
                
                <!-- ç¯ä¿å½±å“ -->
                <div class="card fade-in">
                    <h2 id="impactTitle">ç¯ä¿å½±å“</h2>
                    <p id="impactSubtitle">æ ¹æ®æ‚¨çš„é£Ÿè°±é€‰æ‹©ï¼Œæ‚¨æ­£åœ¨å‡å°‘ï¼š</p>
                    
                    <div class="impact-grid">
                        <div class="impact-item">
                            <div class="impact-value" id="savedFood">0g</div>
                            <div id="foodWasteLabel">é£Ÿç‰©æµªè´¹</div>
                        </div>
                        <div class="impact-item">
                            <div class="impact-value" id="savedWater">0L</div>
                            <div id="waterLabel">æ°´èµ„æº</div>
                        </div>
                        <div class="impact-item">
                            <div class="impact-value" id="savedCO2">0g</div>
                            <div id="co2Label">ç¢³æ’æ”¾</div>
                        </div>
                        <div class="impact-item">
                            <div class="impact-value" id="savedMoney">Â¥0</div>
                            <div id="moneyLabel">èŠ‚çº¦èµ„é‡‘</div>
                        </div>
                    </div>
                    
                    <div class="result-card">
                        <p id="impactNote">è¿™äº›æ•°å€¼æ ¹æ®æ‰€é€‰äººæ•°å’Œé£Ÿæå®æ—¶è®¡ç®—ã€‚</p>
                    </div>
                </div>
                
                <!-- å¨ä½™åˆ©ç”¨ä¸å†åˆ©ç”¨ -->
                <div class="card fade-in">
                    <h2 id="tipsTitle">å¨ä½™åˆ©ç”¨ä¸å†åˆ©ç”¨</h2>
                    <p id="tipsSubtitle">å°†é£Ÿç‰©è¾¹è§’æ–™å˜æˆç¾å‘³ä½³è‚´çš„åˆ›æ„æ–¹æ³•</p>
                    
                    <div class="food-waste-tips">
                        <div class="tip-item">
                            <strong id="tip1Title">è”¬èœåºŸæ–™é«˜æ±¤</strong>
                            <p id="tip1Text">ç”¨æ´‹è‘±çš®ã€èƒ¡èåœçš®ã€èŠ¹èœå¶å’Œè˜‘è‡æ ¹åˆ¶ä½œè¥å…»ä¸°å¯Œçš„é«˜æ±¤ï¼Œé€‚åˆåšæ±¤åº•æˆ–ç‚–èœã€‚</p>
                            <button class="view-recipe-btn" onclick="showReuseRecipe('vegetableBroth')" id="vegBrothBtn">æŸ¥çœ‹å†åˆ©ç”¨é£Ÿè°±</button>
                            <div class="reuse-recipe" id="vegetableBrothRecipe">
                                <h4>ğŸ² è”¬èœé«˜æ±¤é£Ÿè°±</h4>
                                <p><strong>æ‰€éœ€å¨ä½™ï¼š</strong>æ´‹è‘±çš®ã€èƒ¡èåœçš®ã€èŠ¹èœå¶ã€è˜‘è‡æ ¹ã€å¤§è’œçš®ç­‰</p>
                                <p><strong>é¢å¤–ææ–™ï¼š</strong>æ°´2å‡ã€æœˆæ¡‚å¶1ç‰‡ã€èƒ¡æ¤’ç²’5é¢—</p>
                                <p><strong>åˆ¶ä½œæ­¥éª¤ï¼š</strong></p>
                                <ol>
                                    <li>å°†æ‰€æœ‰è”¬èœåºŸæ–™æ´—å‡€ï¼Œæ”¾å…¥å¤§é”…ä¸­</li>
                                    <li>åŠ å…¥æ°´å’Œé¦™æ–™ï¼Œå¤§ç«ç…®æ²¸</li>
                                    <li>è½¬å°ç«ç‚–ç…®1å°æ—¶ï¼ŒæœŸé—´æ’‡å»æµ®æ²«</li>
                                    <li>è¿‡æ»¤æ‰å›ºä½“ï¼Œé«˜æ±¤å¯å†·è—ä¿å­˜3-5å¤©</li>
                                    <li>å¯ç”¨äºåˆ¶ä½œæ±¤ã€ç‚–èœã€çƒ©é¥­ç­‰</li>
                                </ol>
                                <p><strong>å¯å†åˆ©ç”¨çš„èœè‚´ï¼š</strong>è”¬èœæ±¤ã€ç•ªèŒ„æµ“æ±¤ã€æµ·é²œé¥­ã€ç‚–èœ</p>
                            </div>
                        </div>
                        
                        <div class="tip-item">
                            <strong id="tip2Title">é¢åŒ…ä¸ä¸é¢åŒ…å±‘</strong>
                            <p id="tip2Text">å°†é™ˆæ—§é¢åŒ…åˆ¶æˆé¦™è„†çš„é¢åŒ…ä¸æˆ–é¢åŒ…å±‘ï¼Œå¯ç”¨äºæ²™æ‹‰ã€æ±¤å“æˆ–ç…ç‚¸é£Ÿå“ã€‚</p>
                            <button class="view-recipe-btn" onclick="showReuseRecipe('breadCroutons')" id="breadBtn">æŸ¥çœ‹å†åˆ©ç”¨é£Ÿè°±</button>
                            <div class="reuse-recipe" id="breadCroutonsRecipe">
                                <h4>ğŸ è‡ªåˆ¶é¢åŒ…ä¸é£Ÿè°±</h4>
                                <p><strong>æ‰€éœ€å¨ä½™ï¼š</strong>é™ˆæ—§é¢åŒ…ã€é¢åŒ…è¾¹ã€æ³•æ£ç­‰</p>
                                <p><strong>é¢å¤–ææ–™ï¼š</strong>æ©„æ¦„æ²¹2æ±¤åŒ™ã€è’œç²‰1èŒ¶åŒ™ã€ç›å°‘è®¸ã€é¦™æ–™é€‚é‡</p>
                                <p><strong>åˆ¶ä½œæ­¥éª¤ï¼š</strong></p>
                                <ol>
                                    <li>å°†é¢åŒ…åˆ‡æˆ2å˜ç±³è§æ–¹çš„å°å—</li>
                                    <li>æ”¾å…¥ç¢—ä¸­ï¼ŒåŠ å…¥æ©„æ¦„æ²¹ã€è’œç²‰ã€ç›å’Œé¦™æ–™æ‹ŒåŒ€</li>
                                    <li>å¹³é“ºåœ¨çƒ¤ç›˜ä¸Šï¼Œé¢„çƒ­çƒ¤ç®±è‡³180Â°C</li>
                                    <li>çƒ¤10-15åˆ†é’Ÿè‡³é‡‘é»„é…¥è„†ï¼Œä¸­é€”ç¿»åŠ¨ä¸€æ¬¡</li>
                                    <li>å†·å´åå¯†å°ä¿å­˜ï¼Œå¯ä¿å­˜1-2å‘¨</li>
                                </ol>
                                <p><strong>å¯å†åˆ©ç”¨çš„èœè‚´ï¼š</strong>å‡¯æ’’æ²™æ‹‰ã€å—ç“œæ±¤ã€çƒ¤è”¬èœã€æ„å¤§åˆ©é¢</p>
                            </div>
                        </div>
                        
                        <div class="tip-item">
                            <strong id="tip3Title">æœçš®æœé…±ä¸ç³–æµ†</strong>
                            <p id="tip3Text">ç”¨è‹¹æœçš®ã€æŸ‘æ©˜çš®ç­‰åˆ¶ä½œå¤©ç„¶æœé…±æˆ–ç³–æµ†ï¼Œä¸ºé¥®å“å’Œç”œç‚¹å¢æ·»é£å‘³ã€‚</p>
                            <button class="view-recipe-btn" onclick="showReuseRecipe('fruitPeelJam')" id="fruitBtn">æŸ¥çœ‹å†åˆ©ç”¨é£Ÿè°±</button>
                            <div class="reuse-recipe" id="fruitPeelJamRecipe">
                                <h4>ğŸŠ æŸ‘æ©˜çš®ç³–æµ†é£Ÿè°±</h4>
                                <p><strong>æ‰€éœ€å¨ä½™ï¼š</strong>æŸ‘æ©˜çš®ï¼ˆæ©™ã€æŸ æª¬ã€æŸšå­ç­‰ï¼‰</p>
                                <p><strong>é¢å¤–ææ–™ï¼š</strong>ç™½ç³–200å…‹ã€æ°´200æ¯«å‡ã€æŸ æª¬æ±1æ±¤åŒ™</p>
                                <p><strong>åˆ¶ä½œæ­¥éª¤ï¼š</strong></p>
                                <ol>
                                    <li>å°†æŸ‘æ©˜çš®æ´—å‡€ï¼Œå»é™¤ç™½è‰²éƒ¨åˆ†ï¼ˆå¯å‡å°‘è‹¦å‘³ï¼‰</li>
                                    <li>åˆ‡æˆç»†ä¸ï¼Œç”¨ç›æ°´æµ¸æ³¡30åˆ†é’Ÿå»é™¤è‹¦å‘³</li>
                                    <li>é”…ä¸­åŠ å…¥æ°´ã€ç³–å’ŒæŸ æª¬æ±ï¼Œä¸­ç«ç…®è‡³ç³–æº¶è§£</li>
                                    <li>åŠ å…¥æŸ‘æ©˜çš®ä¸ï¼Œå°ç«ç…®15-20åˆ†é’Ÿè‡³æµ“ç¨ </li>
                                    <li>è¿‡æ»¤åè£…ç“¶ï¼Œå†·è—å¯ä¿å­˜2-3å‘¨</li>
                                </ol>
                                <p><strong>å¯å†åˆ©ç”¨çš„èœè‚´ï¼š</strong>é¸¡å°¾é…’ã€è‹æ‰“æ°´ã€ç³•ç‚¹æ·‹é…±ã€é…¸å¥¶è°ƒå‘³</p>
                            </div>
                        </div>
                        
                        <div class="tip-item">
                            <strong id="tip4Title">è‚‰éª¨é«˜æ±¤</strong>
                            <p id="tip4Text">ç”¨é¸¡éª¨ã€é±¼éª¨ã€è‚‰éª¨ç­‰ç†¬åˆ¶æµ“éƒé«˜æ±¤ï¼Œæ˜¯è®¸å¤šèœè‚´çš„ç²¾ååŸºç¡€ã€‚</p>
                            <button class="view-recipe-btn" onclick="showReuseRecipe('boneBroth')" id="boneBtn">æŸ¥çœ‹å†åˆ©ç”¨é£Ÿè°±</button>
                            <div class="reuse-recipe" id="boneBrothRecipe">
                                <h4>ğŸ– é¸¡è‚‰éª¨é«˜æ±¤é£Ÿè°±</h4>
                                <p><strong>æ‰€éœ€å¨ä½™ï¼š</strong>é¸¡éª¨æ¶ã€é¸¡ç¿…å°–ã€é¸¡è„–ã€é¸¡è„šç­‰</p>
                                <p><strong>é¢å¤–ææ–™ï¼š</strong>æ°´3å‡ã€å§œ3ç‰‡ã€è‘±1æ ¹ã€æ–™é…’2æ±¤åŒ™ã€ç›é€‚é‡</p>
                                <p><strong>åˆ¶ä½œæ­¥éª¤ï¼š</strong></p>
                                <ol>
                                    <li>é¸¡éª¨æ´—å‡€ï¼Œå†·æ°´ä¸‹é”…ç„¯æ°´å»è…¥ï¼Œæå‡ºæ´—å‡€</li>
                                    <li>å°†é¸¡éª¨æ”¾å…¥å¤§é”…ï¼ŒåŠ å…¥æ°´ã€å§œç‰‡ã€è‘±æ®µå’Œæ–™é…’</li>
                                    <li>å¤§ç«ç…®æ²¸åè½¬å°ç«ï¼Œæ…¢ç‚–4-6å°æ—¶ï¼ˆå¯åŠ é†‹å¸®åŠ©é’™è´¨é‡Šæ”¾ï¼‰</li>
                                    <li>è¿‡æ»¤æ‰å›ºä½“ï¼Œå†·å´åå»é™¤è¡¨é¢æ²¹è„‚</li>
                                    <li>å¯åˆ†è£…å†·å†»ä¿å­˜ï¼Œä½¿ç”¨å‰åŠ çƒ­å³å¯</li>
                                </ol>
                                <p><strong>å¯å†åˆ©ç”¨çš„èœè‚´ï¼š</strong>é¸¡æ±¤é¢ã€ç²¥å“ã€ç‚–èœã€ç«é”…æ±¤åº•</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- ç¬¬äºŒé¡µï¼šæ’è¡Œæ¦œ -->
        <div id="leaderboard" class="page">
            <section class="hero">
                <div class="container">
                    <h1 id="leaderboardTitle">å‡å°‘æµªè´¹æ’è¡Œæ¦œ</h1>
                    <p id="leaderboardSubtitle">æ’åå‰6çš„ç”¨æˆ·ï¼ˆæµªè´¹æœ€å°‘æ’åç¬¬ä¸€ï¼‰</p>
                </div>
            </section>

            <section class="container">
                <div class="card fade-in">
                    <h2 id="leaderboardTitle2">æ’è¡Œæ¦œ</h2>
                    <p id="leaderboardDescription">ä½¿ç”¨æœ¬ç½‘ç«™ç”Ÿæˆé£Ÿè°±çš„çœŸå®ç”¨æˆ·ï¼ŒæŒ‰ç…§å‡å°‘çš„æµªè´¹é‡ä»å°‘åˆ°å¤šæ’å</p>
                    
                    <div class="leaderboard" id="leaderboardList">
                        <!-- æ’è¡Œæ¦œå†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                    
                    <div class="result-card">
                        <h3 id="yourRankTitle">æ‚¨çš„æ’å</h3>
                        <p id="yourRankText">ç”Ÿæˆé£Ÿè°±åæŸ¥çœ‹æ‚¨çš„æ’å</p>
                    </div>
                </div>
                
                <div class="card fade-in">
                    <h2 id="howToJoinTitle">å¦‚ä½•å‚ä¸æ’åï¼Ÿ</h2>
                    <p id="howToStep1">1. åœ¨"æ™ºèƒ½é£Ÿè°±ç”Ÿæˆå™¨"é¡µé¢è¾“å…¥æ‚¨çš„æ˜µç§°</p>
                    <p id="howToStep2">2. é€‰æ‹©ç”¨é¤äººæ•°ã€ç±»å‹å’Œé£Ÿæ</p>
                    <p id="howToStep3">3. ç‚¹å‡»"ç”Ÿæˆæ™ºèƒ½é£Ÿè°±"æŒ‰é’®</p>
                    <p id="howToStep4">4. ç³»ç»Ÿä¼šè‡ªåŠ¨è®¡ç®—æ‚¨å‡å°‘çš„æµªè´¹é‡å¹¶æ·»åŠ åˆ°æ’è¡Œæ¦œ</p>
                    <p id="howToStep5">5. æµªè´¹è¶Šå°‘çš„ç”¨æˆ·æ’åè¶Šé å‰</p>
                </div>
            </section>
        </div>

        <footer class="container">
            <p id="footerText">FoodGuardian AI | BIEA 2026 STEMç«èµ›é¡¹ç›® | å›¢é˜Ÿ CMMMMC | é˜Ÿä¼ I-Create2</p>
        </footer>
    </div>

    <script>
        // å¤šè¯­è¨€æ”¯æŒ
        const translations = {
            zh: {
                // å¯¼èˆªå’Œæ ‡é¢˜
                welcomeTitle: "æ¬¢è¿ä½¿ç”¨ FoodGuardian AI",
                welcomeSubtitle: "è¯·è¾“å…¥æ‚¨çš„æ˜µç§°ï¼ŒåŠ å…¥æˆ‘ä»¬çš„é˜²æµªè´¹è¡ŒåŠ¨",
                usernameLabel: "æ‚¨çš„æ˜µç§°ï¼ˆç”¨äºæ’è¡Œæ¦œï¼‰",
                usernameHint: "æ˜µç§°å°†æ˜¾ç¤ºåœ¨æ’è¡Œæ¦œä¸­",
                enterBtn: "è¿›å…¥ç½‘ç«™",
                howToTitle: "å¦‚ä½•å‚ä¸ï¼Ÿ",
                howToStep1: "1. è¾“å…¥æ‚¨çš„æ˜µç§°",
                howToStep2: "2. ä½¿ç”¨æ™ºèƒ½é£Ÿè°±ç”Ÿæˆå™¨",
                howToStep3: "3. ç³»ç»Ÿè®¡ç®—æ‚¨å‡å°‘çš„æµªè´¹é‡",
                howToStep4: "4. åœ¨æ’è¡Œæ¦œä¸­æŸ¥çœ‹æ‚¨çš„æ’å",
                
                // é€‰é¡¹å¡
                generatorBtn: "æ™ºèƒ½é£Ÿè°±ç”Ÿæˆå™¨",
                leaderboardBtn: "æŸ¥çœ‹æ’è¡Œæ¦œ",
                
                // è‹±é›„åŒºåŸŸ
                heroTitle: "æ™ºèƒ½é£Ÿç‰©æµªè´¹å‡å°‘",
                heroSubtitle: "AIé©±åŠ¨çš„é£Ÿè°±è®¡ç®—å™¨ï¼Œé€šè¿‡ç²¾å‡†ä»½é‡é˜²æ­¢æµªè´¹",
                
                // ç”Ÿæˆå™¨é¡µé¢
                generatorTitle: "æ™ºèƒ½é£Ÿè°±ç”Ÿæˆå™¨",
                currentUserLabel: "å½“å‰ç”¨æˆ·ï¼š",
                peopleLabel: "ç”¨é¤äººæ•°",
                peopleUnit: "äºº",
                mealLabel: "ç”¨é¤ç±»å‹",
                ingredientLabel: "ä¸»è¦é£Ÿæ",
                generateButton: "ç”Ÿæˆæ™ºèƒ½é£Ÿè°±",
                recipePlaceholder: "å¡«å†™ä»¥ä¸Šä¿¡æ¯ï¼Œç‚¹å‡»ç”Ÿæˆè·å¾—ä¸ªæ€§åŒ–é£Ÿè°±",
                
                // ç¯ä¿å½±å“
                impactTitle: "ç¯ä¿å½±å“",
                impactSubtitle: "æ ¹æ®æ‚¨çš„é£Ÿè°±é€‰æ‹©ï¼Œæ‚¨æ­£åœ¨å‡å°‘ï¼š",
                foodWasteLabel: "é£Ÿç‰©æµªè´¹",
                waterLabel: "æ°´èµ„æº",
                co2Label: "ç¢³æ’æ”¾",
                moneyLabel: "èŠ‚çº¦èµ„é‡‘",
                impactNote: "è¿™äº›æ•°å€¼æ ¹æ®æ‰€é€‰äººæ•°å’Œé£Ÿæå®æ—¶è®¡ç®—ã€‚",
                
                // å¨ä½™åˆ©ç”¨ä¸å†åˆ©ç”¨
                tipsTitle: "å¨ä½™åˆ©ç”¨ä¸å†åˆ©ç”¨",
                tipsSubtitle: "å°†é£Ÿç‰©è¾¹è§’æ–™å˜æˆç¾å‘³ä½³è‚´çš„åˆ›æ„æ–¹æ³•",
                tip1Title: "è”¬èœåºŸæ–™é«˜æ±¤",
                tip1Text: "ç”¨æ´‹è‘±çš®ã€èƒ¡èåœçš®ã€èŠ¹èœå¶å’Œè˜‘è‡æ ¹åˆ¶ä½œè¥å…»ä¸°å¯Œçš„é«˜æ±¤ï¼Œé€‚åˆåšæ±¤åº•æˆ–ç‚–èœã€‚",
                tip2Title: "é¢åŒ…ä¸ä¸é¢åŒ…å±‘",
                tip2Text: "å°†é™ˆæ—§é¢åŒ…åˆ¶æˆé¦™è„†çš„é¢åŒ…ä¸æˆ–é¢åŒ…å±‘ï¼Œå¯ç”¨äºæ²™æ‹‰ã€æ±¤å“æˆ–ç…ç‚¸é£Ÿå“ã€‚",
                tip3Title: "æœçš®æœé…±ä¸ç³–æµ†",
                tip3Text: "ç”¨è‹¹æœçš®ã€æŸ‘æ©˜çš®ç­‰åˆ¶ä½œå¤©ç„¶æœé…±æˆ–ç³–æµ†ï¼Œä¸ºé¥®å“å’Œç”œç‚¹å¢æ·»é£å‘³ã€‚",
                tip4Title: "è‚‰éª¨é«˜æ±¤",
                tip4Text: "ç”¨é¸¡éª¨ã€é±¼éª¨ã€è‚‰éª¨ç­‰ç†¬åˆ¶æµ“éƒé«˜æ±¤ï¼Œæ˜¯è®¸å¤šèœè‚´çš„ç²¾ååŸºç¡€ã€‚",
                viewRecipeBtn: "æŸ¥çœ‹å†åˆ©ç”¨é£Ÿè°±",
                
                // å†åˆ©ç”¨é£Ÿè°±å†…å®¹
                vegetableBrothTitle: "ğŸ² è”¬èœé«˜æ±¤é£Ÿè°±",
                breadCroutonsTitle: "ğŸ è‡ªåˆ¶é¢åŒ…ä¸é£Ÿè°±",
                fruitPeelJamTitle: "ğŸŠ æŸ‘æ©˜çš®ç³–æµ†é£Ÿè°±",
                boneBrothTitle: "ğŸ– é¸¡è‚‰éª¨é«˜æ±¤é£Ÿè°±",
                
                // æ’è¡Œæ¦œé¡µé¢
                leaderboardTitle: "å‡å°‘æµªè´¹æ’è¡Œæ¦œ",
                leaderboardSubtitle: "æ’åå‰6çš„ç”¨æˆ·ï¼ˆæµªè´¹æœ€å°‘æ’åç¬¬ä¸€ï¼‰",
                leaderboardTitle2: "æ’è¡Œæ¦œ",
                leaderboardDescription: "ä½¿ç”¨æœ¬ç½‘ç«™ç”Ÿæˆé£Ÿè°±çš„çœŸå®ç”¨æˆ·ï¼ŒæŒ‰ç…§å‡å°‘çš„æµªè´¹é‡ä»å°‘åˆ°å¤šæ’å",
                yourRankTitle: "æ‚¨çš„æ’å",
                yourRankText: "ç”Ÿæˆé£Ÿè°±åæŸ¥çœ‹æ‚¨çš„æ’å",
                howToJoinTitle: "å¦‚ä½•å‚ä¸æ’åï¼Ÿ",
                
                // é¡µè„š
                footerText: "FoodGuardian AI | BIEA 2026 STEMç«èµ›é¡¹ç›® | å›¢é˜Ÿ CMMMMC | é˜Ÿä¼ I-Create2",
                
                // è¯­è¨€æŒ‰é’®
                langBtn: "ğŸŒ ç®€ä½“ä¸­æ–‡"
            },
            en: {
                // å¯¼èˆªå’Œæ ‡é¢˜
                welcomeTitle: "Welcome to FoodGuardian AI",
                welcomeSubtitle: "Please enter your nickname to join our anti-waste campaign",
                usernameLabel: "Your Nickname (for leaderboard)",
                usernameHint: "Nickname will be displayed on the leaderboard",
                enterBtn: "Enter Website",
                howToTitle: "How to participate?",
                howToStep1: "1. Enter your nickname",
                howToStep2: "2. Use the Smart Recipe Generator",
                howToStep3: "3. System calculates your waste reduction",
                howToStep4: "4. Check your rank on the leaderboard",
                
                // é€‰é¡¹å¡
                generatorBtn: "Smart Recipe Generator",
                leaderboardBtn: "View Leaderboard",
                
                // è‹±é›„åŒºåŸŸ
                heroTitle: "Smart Food Waste Reduction",
                heroSubtitle: "AI-powered recipe calculator that prevents waste with precise portions",
                
                // ç”Ÿæˆå™¨é¡µé¢
                generatorTitle: "Smart Recipe Generator",
                currentUserLabel: "Current User: ",
                peopleLabel: "Number of People",
                peopleUnit: "people",
                mealLabel: "Meal Type",
                ingredientLabel: "Main Ingredient",
                generateButton: "Generate Smart Recipe",
                recipePlaceholder: "Fill in the information above and click generate",
                
                // ç¯ä¿å½±å“
                impactTitle: "Environmental Impact",
                impactSubtitle: "Based on your recipe selection, you're reducing:",
                foodWasteLabel: "Food Waste",
                waterLabel: "Water",
                co2Label: "COâ‚‚ Emissions",
                moneyLabel: "Money Saved",
                impactNote: "These values are calculated in real-time based on the number of people and ingredients selected.",
                
                // å¨ä½™åˆ©ç”¨ä¸å†åˆ©ç”¨
                tipsTitle: "Food Waste Reuse",
                tipsSubtitle: "Creative ways to turn food scraps into delicious dishes",
                tip1Title: "Vegetable Scrap Broth",
                tip1Text: "Make nutritious broth from onion skins, carrot peels, celery leaves and mushroom stems, perfect for soups and stews.",
                tip2Title: "Bread Croutons & Crumbs",
                tip2Text: "Turn stale bread into crispy croutons or breadcrumbs for salads, soups or fried foods.",
                tip3Title: "Fruit Peel Jam & Syrup",
                tip3Text: "Make natural jam or syrup from apple peels, citrus peels to add flavor to drinks and desserts.",
                tip4Title: "Bone Broth",
                tip4Text: "Simmer chicken bones, fish bones, meat bones to make rich broth, the essence of many dishes.",
                viewRecipeBtn: "View Reuse Recipe",
                
                // å†åˆ©ç”¨é£Ÿè°±å†…å®¹
                vegetableBrothTitle: "ğŸ² Vegetable Broth Recipe",
                breadCroutonsTitle: "ğŸ Homemade Croutons Recipe",
                fruitPeelJamTitle: "ğŸŠ Citrus Peel Syrup Recipe",
                boneBrothTitle: "ğŸ– Chicken Bone Broth Recipe",
                
                // æ’è¡Œæ¦œé¡µé¢
                leaderboardTitle: "Waste Reduction Leaderboard",
                leaderboardSubtitle: "Top 6 users (least waste ranks first)",
                leaderboardTitle2: "Leaderboard",
                leaderboardDescription: "Real users who generated recipes, ranked by waste reduction from least to most",
                yourRankTitle: "Your Rank",
                yourRankText: "Generate a recipe to see your ranking",
                howToJoinTitle: "How to join the ranking?",
                
                // é¡µè„š
                footerText: "FoodGuardian AI | BIEA 2026 STEM Competition Project | Team CMMMMC | Team I-Create2",
                
                // è¯­è¨€æŒ‰é’®
                langBtn: "ğŸŒ English"
            }
        };

        let currentLanguage = 'zh';
        let currentUserName = '';
        
        // è¯­è¨€åˆ‡æ¢åŠŸèƒ½
        document.getElementById('languageBtn').addEventListener('click', function(e) {
            e.stopPropagation();
            document.getElementById('langOptions').classList.toggle('show');
        });
        
        document.querySelectorAll('.lang-option').forEach(option => {
            option.addEventListener('click', function() {
                currentLanguage = this.getAttribute('data-lang');
                applyLanguage();
                updateLanguageButton();
                document.getElementById('langOptions').classList.remove('show');
            });
        });
        
        // å…³é—­è¯­è¨€é€‰é¡¹å½“ç‚¹å‡»å…¶ä»–åœ°æ–¹
        document.addEventListener('click', function(e) {
            if (!e.target.closest('.language-switcher')) {
                document.getElementById('langOptions').classList.remove('show');
            }
        });
        
        function applyLanguage() {
            const t = translations[currentLanguage];
            
            // æ›´æ–°æ‰€æœ‰æ–‡æœ¬å…ƒç´ 
            document.getElementById('welcomeTitle').textContent = t.welcomeTitle;
            document.getElementById('welcomeSubtitle').textContent = t.welcomeSubtitle;
            document.getElementById('usernameLabel').textContent = t.usernameLabel;
            document.getElementById('usernameHint').textContent = t.usernameHint;
            document.getElementById('enterBtn').textContent = t.enterBtn;
            document.getElementById('howToTitle').textContent = t.howToTitle;
            document.getElementById('howToStep1').textContent = t.howToStep1;
            document.getElementById('howToStep2').textContent = t.howToStep2;
            document.getElementById('howToStep3').textContent = t.howToStep3;
            document.getElementById('howToStep4').textContent = t.howToStep4;
            
            // æ›´æ–°é¡µé¢æŒ‰é’®
            document.querySelectorAll('.page-btn')[0].textContent = t.generatorBtn;
            document.querySelectorAll('.page-btn')[1].textContent = t.leaderboardBtn;
            
            // æ›´æ–°è‹±é›„åŒºåŸŸ
            document.getElementById('heroTitle').textContent = t.heroTitle;
            document.getElementById('heroSubtitle').textContent = t.heroSubtitle;
            
            // æ›´æ–°ç”Ÿæˆå™¨
            document.getElementById('generatorTitle').textContent = t.generatorTitle;
            document.getElementById('currentUserLabel').textContent = t.currentUserLabel;
            document.getElementById('peopleLabel').textContent = t.peopleLabel;
            document.getElementById('mealLabel').textContent = t.mealLabel;
            document.getElementById('ingredientLabel').textContent = t.ingredientLabel;
            document.getElementById('generateButton').textContent = t.generateButton;
            document.getElementById('recipePlaceholder').textContent = t.recipePlaceholder;
            
            // æ›´æ–°ç¯ä¿å½±å“
            document.getElementById('impactTitle').textContent = t.impactTitle;
            document.getElementById('impactSubtitle').textContent = t.impactSubtitle;
            document.getElementById('foodWasteLabel').textContent = t.foodWasteLabel;
            document.getElementById('waterLabel').textContent = t.waterLabel;
            document.getElementById('co2Label').textContent = t.co2Label;
            document.getElementById('moneyLabel').textContent = t.moneyLabel;
            document.getElementById('impactNote').textContent = t.impactNote;
            
            // æ›´æ–°å¨ä½™åˆ©ç”¨
            document.getElementById('tipsTitle').textContent = t.tipsTitle;
            document.getElementById('tipsSubtitle').textContent = t.tipsSubtitle;
            document.getElementById('tip1Title').textContent = t.tip1Title;
            document.getElementById('tip1Text').textContent = t.tip1Text;
            document.getElementById('tip2Title').textContent = t.tip2Title;
            document.getElementById('tip2Text').textContent = t.tip2Text;
            document.getElementById('tip3Title').textContent = t.tip3Title;
            document.getElementById('tip3Text').textContent = t.tip3Text;
            document.getElementById('tip4Title').textContent = t.tip4Title;
            document.getElementById('tip4Text').textContent = t.tip4Text;
            
            // æ›´æ–°æŸ¥çœ‹é£Ÿè°±æŒ‰é’®æ–‡æœ¬
            document.querySelectorAll('.view-recipe-btn').forEach(btn => {
                btn.textContent = t.viewRecipeBtn;
            });
            
            // æ›´æ–°å†åˆ©ç”¨é£Ÿè°±æ ‡é¢˜
            document.querySelectorAll('.reuse-recipe h4').forEach((title, index) => {
                if (index === 0) title.textContent = t.vegetableBrothTitle;
                else if (index === 1) title.textContent = t.breadCroutonsTitle;
                else if (index === 2) title.textContent = t.fruitPeelJamTitle;
                else if (index === 3) title.textContent = t.boneBrothTitle;
            });
            
            // æ›´æ–°æ’è¡Œæ¦œ
            document.getElementById('leaderboardTitle').textContent = t.leaderboardTitle;
            document.getElementById('leaderboardSubtitle').textContent = t.leaderboardSubtitle;
            document.getElementById('leaderboardTitle2').textContent = t.leaderboardTitle2;
            document.getElementById('leaderboardDescription').textContent = t.leaderboardDescription;
            document.getElementById('yourRankTitle').textContent = t.yourRankTitle;
            document.getElementById('yourRankText').textContent = t.yourRankText;
            document.getElementById('howToJoinTitle').textContent = t.howToJoinTitle;
            
            // æ›´æ–°é¡µè„š
            document.getElementById('footerText').textContent = t.footerText;
            
            // æ›´æ–°äººæ•°å•ä½
            document.getElementById('peopleUnit').textContent = t.peopleUnit;
            
            // æ›´æ–°ä¸‹æ‹‰èœå•é€‰é¡¹
            updateSelectOptions();
        }
        
        function updateLanguageButton() {
            const btn = document.getElementById('languageBtn');
            btn.innerHTML = `<span>${translations[currentLanguage].langBtn}</span>`;
        }
        
        function updateSelectOptions() {
            const mealTypeSelect = document.getElementById('mealType');
            const ingredientSelect = document.getElementById('ingredientSelect');
            
            if (currentLanguage === 'zh') {
                mealTypeSelect.innerHTML = `
                    <option value="homecooking">å®¶å¸¸èœ</option>
                    <option value="healthy">å¥åº·å‡è„‚é¤</option>
                    <option value="vegetarian">ç´ é£Ÿ</option>
                    <option value="feast">å®´å®¢èœ</option>
                `;
                
                ingredientSelect.innerHTML = `
                    <option value="tomato">ç•ªèŒ„</option>
                    <option value="chicken">é¸¡èƒ¸è‚‰</option>
                    <option value="potato">åœŸè±†</option>
                    <option value="egg">é¸¡è›‹</option>
                    <option value="beef">ç‰›è‚‰</option>
                    <option value="fish">é±¼</option>
                `;
            } else {
                mealTypeSelect.innerHTML = `
                    <option value="homecooking">Home Cooking</option>
                    <option value="healthy">Healthy Meal</option>
                    <option value="vegetarian">Vegetarian</option>
                    <option value="feast">Feast Dish</option>
                `;
                
                ingredientSelect.innerHTML = `
                    <option value="tomato">Tomato</option>
                    <option value="chicken">Chicken Breast</option>
                    <option value="potato">Potato</option>
                    <option value="egg">Eggs</option>
                    <option value="beef">Beef</option>
                    <option value="fish">Fish</option>
                `;
            }
        }
        
        // æ˜¾ç¤ºå¨ä½™å†åˆ©ç”¨é£Ÿè°±
        function showReuseRecipe(recipeId) {
            // éšè—æ‰€æœ‰é£Ÿè°±
            document.querySelectorAll('.reuse-recipe').forEach(recipe => {
                recipe.classList.remove('show');
            });
            
            // æ˜¾ç¤ºé€‰ä¸­çš„é£Ÿè°±
            const recipeElement = document.getElementById(recipeId + 'Recipe');
            if (recipeElement) {
                recipeElement.classList.add('show');
                // æ»šåŠ¨åˆ°é£Ÿè°±ä½ç½®
                recipeElement.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }
        }

        // ç”¨æˆ·ç®¡ç†
        function checkUser() {
            const storedUser = localStorage.getItem('foodguardian_currentUser');
            if (storedUser) {
                currentUserName = storedUser;
                showMainContent();
            }
        }
        
        // æ³¨å†Œæ–°ç”¨æˆ·
        function registerUser() {
            const usernameInput = document.getElementById('usernameInput');
            const username = usernameInput.value.trim();
            
            if (!username) {
                alert(currentLanguage === 'zh' ? 'è¯·è¾“å…¥æ‚¨çš„æ˜µç§°ï¼' : 'Please enter your nickname!');
                usernameInput.focus();
                return;
            }
            
            if (username.length < 2 || username.length > 20) {
                alert(currentLanguage === 'zh' ? 'æ˜µç§°é•¿åº¦åº”åœ¨2-20ä¸ªå­—ç¬¦ä¹‹é—´ï¼' : 'Nickname should be 2-20 characters long!');
                usernameInput.focus();
                return;
            }
            
            currentUserName = username;
            localStorage.setItem('foodguardian_currentUser', currentUserName);
            showMainContent();
        }
        
        // æ˜¾ç¤ºä¸»å†…å®¹
        function showMainContent() {
            document.getElementById('welcome').style.display = 'none';
            document.getElementById('mainContent').style.display = 'block';
            document.getElementById('currentUser').textContent = currentUserName;
            
            // åˆå§‹åŒ–ç¯ä¿è®¡ç®—
            updateEnvironmentalImpact(4, 'tomato');
            
            // åˆå§‹åŒ–æ’è¡Œæ¦œ
            updateLeaderboard();
        }
        
        // é¡µé¢åˆ‡æ¢åŠŸèƒ½
        document.querySelectorAll('.page-btn').forEach(button => {
            button.addEventListener('click', function() {
                const pageId = this.getAttribute('data-page');
                
                // éšè—æ‰€æœ‰é¡µé¢
                document.querySelectorAll('.page').forEach(page => {
                    page.classList.remove('active');
                });
                
                // æ˜¾ç¤ºç›®æ ‡é¡µé¢
                document.getElementById(pageId).classList.add('active');
                
                // å¦‚æœæ˜¯æ’è¡Œæ¦œé¡µé¢ï¼Œæ›´æ–°æ’è¡Œæ¦œæ˜¾ç¤º
                if (pageId === 'leaderboard') {
                    updateLeaderboard();
                }
            });
        });

        // é£Ÿè°±æ•°æ®åº“
        const recipes = {
            tomato: {
                name: { zh: "ç•ªèŒ„ç‚’è›‹", en: "Tomato Egg Stir-fry" },
                baseForPeople: 2,
                ingredients: [
                    { name: { zh: "ç•ªèŒ„", en: "Tomato" }, amount: 300, unit: "g" },
                    { name: { zh: "é¸¡è›‹", en: "Eggs" }, amount: 4, unit: "" },
                    { name: { zh: "é£Ÿç”¨æ²¹", en: "Oil" }, amount: 15, unit: "ml" },
                    { name: { zh: "ç›", en: "Salt" }, amount: 3, unit: "g" },
                    { name: { zh: "ç³–", en: "Sugar" }, amount: 5, unit: "g" }
                ],
                steps: [
                    { zh: "ç•ªèŒ„æ´—å‡€åˆ‡å—ï¼Œé¸¡è›‹æ‰“æ•£å¤‡ç”¨", en: "Wash and cut tomatoes into wedges, beat eggs in a bowl" },
                    { zh: "çƒ­é”…å€’æ²¹ï¼Œå…ˆç‚’é¸¡è›‹è‡³å‡å›ºï¼Œç››å‡ºå¤‡ç”¨", en: "Heat oil, scramble eggs until set, set aside" },
                    { zh: "é”…ä¸­å†åŠ å°‘è®¸æ²¹ï¼Œæ”¾å…¥ç•ªèŒ„å—ç¿»ç‚’è‡³å‡ºæ±", en: "Add more oil, stir-fry tomatoes until soft and juicy" },
                    { zh: "åŠ å…¥ç‚’å¥½çš„é¸¡è›‹ï¼ŒåŠ ç›å’Œç³–è°ƒå‘³ï¼Œç¿»ç‚’å‡åŒ€", en: "Add scrambled eggs back, season with salt and sugar, mix well" }
                ]
            },
            chicken: {
                name: { zh: "é¦™ç…é¸¡èƒ¸", en: "Pan-fried Chicken Breast" },
                baseForPeople: 2,
                ingredients: [
                    { name: { zh: "é¸¡èƒ¸è‚‰", en: "Chicken Breast" }, amount: 300, unit: "g" },
                    { name: { zh: "æ©„æ¦„æ²¹", en: "Olive Oil" }, amount: 10, unit: "ml" },
                    { name: { zh: "ç›", en: "Salt" }, amount: 5, unit: "g" },
                    { name: { zh: "é»‘èƒ¡æ¤’", en: "Black Pepper" }, amount: 2, unit: "g" }
                ],
                steps: [
                    { zh: "é¸¡èƒ¸è‚‰ç”¨ç›å’Œé»‘èƒ¡æ¤’è…Œåˆ¶10åˆ†é’Ÿ", en: "Marinate chicken breast with salt and black pepper for 10 minutes" },
                    { zh: "å¹³åº•é”…åŠ çƒ­æ©„æ¦„æ²¹", en: "Heat olive oil in a pan" },
                    { zh: "æ”¾å…¥é¸¡èƒ¸è‚‰ï¼Œæ¯é¢ç…4-5åˆ†é’Ÿè‡³é‡‘é»„", en: "Add chicken breast, cook 4-5 minutes per side until golden" },
                    { zh: "åˆ‡ç‰‡è£…ç›˜å³å¯", en: "Slice and serve" }
                ]
            }
        };

        // æ’è¡Œæ¦œæ•°æ®å­˜å‚¨ - ä½¿ç”¨çœŸå®æ•°æ®
        function getLeaderboardData() {
            const storedData = localStorage.getItem('foodguardian_real_leaderboard');
            if (storedData) {
                return JSON.parse(storedData);
            }
            return [];
        }
        
        function saveLeaderboardData(data) {
            localStorage.setItem('foodguardian_real_leaderboard', JSON.stringify(data));
        }
        
        // æ›´æ–°æ’è¡Œæ¦œæ˜¾ç¤º
        function updateLeaderboard() {
            const leaderboardList = document.getElementById('leaderboardList');
            leaderboardList.innerHTML = '';
            
            // è·å–çœŸå®æ•°æ®
            const leaderboardData = getLeaderboardData();
            
            // æŒ‰æµªè´¹é‡ä»å°‘åˆ°å¤šæ’åºï¼ˆæµªè´¹æœ€å°‘æ’ç¬¬ä¸€ï¼‰
            const sortedData = [...leaderboardData].sort((a, b) => a.wasteReduced - b.wasteReduced);
            
            // åªæ˜¾ç¤ºå‰6å
            const top6 = sortedData.slice(0, 6);
            
            if (top6.length === 0) {
                leaderboardList.innerHTML = `<div class="no-data" style="text-align: center; padding: 2rem; color: #666;">
                    ${currentLanguage === 'zh' ? 'æš‚æ— æ’è¡Œæ¦œæ•°æ®ï¼Œå¿«æ¥ç”Ÿæˆç¬¬ä¸€ä¸ªé£Ÿè°±ï¼' : 'No leaderboard data yet, be the first to generate a recipe!'}
                </div>`;
                document.getElementById('yourRankText').textContent = currentLanguage === 'zh' ? 
                    'æ‚¨è¿˜æœªç”Ÿæˆé£Ÿè°±ï¼Œè¯·å…ˆä½¿ç”¨æ™ºèƒ½é£Ÿè°±ç”Ÿæˆå™¨' : 
                    'You have not generated a recipe yet, please use the Smart Recipe Generator first';
                return;
            }
            
            top6.forEach((user, index) => {
                const rankClass = `rank rank-${index + 1}`;
                const rankText = index === 0 ? 'ğŸ¥‡' : index === 1 ? 'ğŸ¥ˆ' : index === 2 ? 'ğŸ¥‰' : index + 1;
                
                const wasteText = currentLanguage === 'zh' ? 'å‡å°‘æµªè´¹' : 'Waste Reduced';
                
                const item = document.createElement('div');
                item.className = 'leaderboard-item';
                item.innerHTML = `
                    <div class="${rankClass}">${rankText}</div>
                    <div class="user-info">
                        <div class="user-name">${user.name}</div>
                        <div>${wasteText}: <span class="waste-amount">${user.wasteReduced}g</span></div>
                        <div class="timestamp">${user.timestamp}</div>
                    </div>
                `;
                leaderboardList.appendChild(item);
            });
            
            // æ›´æ–°ç”¨æˆ·æ’åä¿¡æ¯
            if (currentUserName) {
                const userRank = getUserRank(currentUserName);
                if (userRank <= leaderboardData.length) {
                    const rankText = currentLanguage === 'zh' ? 
                        `${currentUserName}ï¼Œæ‚¨å½“å‰æ’å: ç¬¬${userRank}åï¼ˆå…±${leaderboardData.length}äººï¼‰` :
                        `${currentUserName}, your current rank: ${userRank} (out of ${leaderboardData.length} people)`;
                    document.getElementById('yourRankText').textContent = rankText;
                } else {
                    document.getElementById('yourRankText').textContent = currentLanguage === 'zh' ? 
                        'æ‚¨è¿˜æœªç”Ÿæˆé£Ÿè°±ï¼Œè¯·å…ˆä½¿ç”¨æ™ºèƒ½é£Ÿè°±ç”Ÿæˆå™¨' : 
                        'You have not generated a recipe yet, please use the Smart Recipe Generator first';
                }
            }
        }

        // è·å–ç”¨æˆ·æ’å
        function getUserRank(username) {
            const leaderboardData = getLeaderboardData();
            const sortedData = [...leaderboardData].sort((a, b) => a.wasteReduced - b.wasteReduced);
            const userIndex = sortedData.findIndex(user => user.name === username);
            return userIndex !== -1 ? userIndex + 1 : leaderboardData.length + 1;
        }

        // æ·»åŠ ç”¨æˆ·åˆ°æ’è¡Œæ¦œ
        function addToLeaderboard(username, wasteReduced) {
            // è·å–å½“å‰æ—¶é—´
            const now = new Date();
            const timestamp = `${now.getFullYear()}-${String(now.getMonth() + 1).padStart(2, '0')}-${String(now.getDate()).padStart(2, '0')} ${String(now.getHours()).padStart(2, '0')}:${String(now.getMinutes()).padStart(2, '0')}`;
            
            // è·å–ç°æœ‰æ•°æ®
            let leaderboardData = getLeaderboardData();
            
            // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²å­˜åœ¨
            const existingUserIndex = leaderboardData.findIndex(user => user.name === username);
            
            if (existingUserIndex !== -1) {
                // æ›´æ–°ç°æœ‰ç”¨æˆ·ï¼ˆåªä¿ç•™æ›´å¥½çš„æˆç»©ï¼‰
                if (wasteReduced < leaderboardData[existingUserIndex].wasteReduced) {
                    leaderboardData[existingUserIndex].wasteReduced = wasteReduced;
                    leaderboardData[existingUserIndex].timestamp = timestamp;
                }
            } else {
                // æ·»åŠ æ–°ç”¨æˆ·
                leaderboardData.push({ 
                    name: username, 
                    wasteReduced: wasteReduced,
                    timestamp: timestamp
                });
            }
            
            // ä¿å­˜æ•°æ®
            saveLeaderboardData(leaderboardData);
            
            return existingUserIndex !== -1;
        }

        // æ›´æ–°ç¯ä¿å½±å“æ˜¾ç¤º
        function updateEnvironmentalImpact(people, ingredient) {
            const ingredientFactors = { 
                tomato: 50, 
                chicken: 60, 
                potato: 40, 
                egg: 45, 
                beef: 70, 
                fish: 65 
            };
            
            const wasteFactor = ingredientFactors[ingredient] || 50;
            const wasteSaved = people * wasteFactor;
            const waterSaved = wasteSaved * 5;
            const co2Saved = wasteSaved * 0.5;
            const moneySaved = wasteSaved * 0.02;
            
            document.getElementById('savedFood').textContent = wasteSaved + 'g';
            document.getElementById('savedWater').textContent = waterSaved + 'L';
            document.getElementById('savedCO2').textContent = co2Saved + 'g';
            document.getElementById('savedMoney').textContent = 'Â¥' + moneySaved.toFixed(0);
            
            return wasteSaved;
        }

        // ç”Ÿæˆé£Ÿè°±
        function generateRecipe() {
            if (!currentUserName) {
                alert(currentLanguage === 'zh' ? 'è¯·å…ˆç™»å½•ï¼' : 'Please login first!');
                return;
            }
            
            const people = parseInt(document.getElementById('peopleSlider').value);
            const ingredient = document.getElementById('ingredientSelect').value;
            const recipe = recipes[ingredient] || recipes.tomato;
            
            const resultDiv = document.getElementById('recipeResult');
            
            // æ˜¾ç¤ºåŠ è½½åŠ¨ç”»
            const loadingText = currentLanguage === 'zh' ? 
                `æ­£åœ¨ä¸ºæ‚¨ç”Ÿæˆ${people}äººä»½çš„å®Œç¾é£Ÿè°±...` : 
                `Generating perfect recipe for ${people} ${people === 1 ? 'person' : 'people'}...`;
            
            resultDiv.innerHTML = `
                <div style="text-align: center; padding: 2rem;">
                    <div class="spinner"></div>
                    <p style="margin-top: 1rem; color: var(--warm-orange);">
                        ${loadingText}
                    </p>
                </div>
            `;
            
            // æ¨¡æ‹ŸAIå¤„ç†
            setTimeout(() => {
                const scale = people / recipe.baseForPeople;
                const wasteSaved = updateEnvironmentalImpact(people, ingredient);
                
                // æ·»åŠ åˆ°æ’è¡Œæ¦œ
                const isExistingUser = addToLeaderboard(currentUserName, wasteSaved);
                
                const recipeName = recipe.name[currentLanguage];
                const successMessage = currentLanguage === 'zh' ? 
                    `æ‚¨çš„é£Ÿè°±å·²${isExistingUser ? 'æ›´æ–°åˆ°' : 'æ·»åŠ åˆ°'}æ’è¡Œæ¦œã€‚æ‚¨å‡å°‘äº† <strong>${wasteSaved}g</strong> é£Ÿç‰©æµªè´¹ï¼` :
                    `Your recipe has been ${isExistingUser ? 'updated to' : 'added to'} the leaderboard. You reduced <strong>${wasteSaved}g</strong> of food waste!`;
                const viewLeaderboardText = currentLanguage === 'zh' ? 'æŸ¥çœ‹æ’è¡Œæ¦œ' : 'View Leaderboard';
                
                resultDiv.innerHTML = `
                    <div>
                        <h3>${recipeName}</h3>
                        <p>${currentLanguage === 'zh' ? 'é€‚åˆ' : 'Perfect for'} ${people} ${currentLanguage === 'zh' ? 'äºº' : (people === 1 ? 'person' : 'people')}</p>
                        
                        <h4 style="margin-top: 1.5rem;">${currentLanguage === 'zh' ? 'é£Ÿææ¸…å•' : 'Ingredients'}</h4>
                        <div class="result-card">
                            ${recipe.ingredients.map(ing => {
                                const scaledAmount = Math.round(ing.amount * scale);
                                return `
                                    <div class="ingredient-item">
                                        <span>${ing.name[currentLanguage]}</span>
                                        <span style="font-weight: bold; color: var(--fresh-green);">
                                            ${scaledAmount} ${ing.unit}
                                        </span>
                                    </div>
                                `;
                            }).join('')}
                        </div>
                        
                        <h4 style="margin-top: 1.5rem;">${currentLanguage === 'zh' ? 'åˆ¶ä½œæ­¥éª¤' : 'Instructions'}</h4>
                        <div class="result-card">
                            <ol style="margin-left: 1.5rem;">
                                ${recipe.steps.map(step => `
                                    <li style="margin-bottom: 0.5rem;">${step[currentLanguage]}</li>
                                `).join('')}
                            </ol>
                        </div>
                        
                        <div class="result-card" style="background: linear-gradient(135deg, #e8f5e9, #c8e6c9); margin-top: 1.5rem;">
                            <h4 style="color: #065f46;">ğŸ‰ ${currentLanguage === 'zh' ? 'æ­å–œï¼æ‚¨å·²æˆåŠŸå‡å°‘æµªè´¹' : 'Congratulations! You have successfully reduced waste'}</h4>
                            <p style="margin-top: 0.5rem;">
                                ${successMessage}
                            </p>
                            <p style="margin-top: 0.5rem;">
                                <button class="btn" onclick="switchToLeaderboard()" style="margin-top: 0.5rem;">${viewLeaderboardText}</button>
                            </p>
                        </div>
                    </div>
                `;
                
                // æ›´æ–°æ’è¡Œæ¦œæ˜¾ç¤º
                updateLeaderboard();
            }, 1500);
        }

        // åˆ‡æ¢åˆ°æ’è¡Œæ¦œé¡µé¢
        function switchToLeaderboard() {
            // éšè—æ‰€æœ‰é¡µé¢
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // æ˜¾ç¤ºæ’è¡Œæ¦œé¡µé¢
            document.getElementById('leaderboard').classList.add('active');
            
            // æ›´æ–°æ’è¡Œæ¦œæ˜¾ç¤º
            updateLeaderboard();
        }

        // åˆå§‹åŒ–äº‹ä»¶ç›‘å¬
        function initializeEventListeners() {
            // äººæ•°æ»‘å—
            const peopleSlider = document.getElementById('peopleSlider');
            const peopleValue = document.getElementById('peopleValue');
            
            if (peopleSlider && peopleValue) {
                peopleSlider.addEventListener('input', function() {
                    const people = this.value;
                    peopleValue.textContent = people;
                    const ingredient = document.getElementById('ingredientSelect').value;
                    updateEnvironmentalImpact(people, ingredient);
                });
                
                // é£Ÿæé€‰æ‹©å˜åŒ–
                document.getElementById('ingredientSelect').addEventListener('change', function() {
                    const people = parseInt(peopleSlider.value);
                    updateEnvironmentalImpact(people, this.value);
                });
            }
            
            // ç”¨æˆ·åè¾“å…¥æ¡†å›è½¦é”®æ”¯æŒ
            const usernameInput = document.getElementById('usernameInput');
            if (usernameInput) {
                usernameInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        registerUser();
                    }
                });
            }
        }
        
        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        window.addEventListener('load', function() {
            // åº”ç”¨åˆå§‹è¯­è¨€
            applyLanguage();
            
            // åˆå§‹åŒ–äº‹ä»¶ç›‘å¬
            initializeEventListeners();
            
            // æ£€æŸ¥æ˜¯å¦æœ‰å·²ç™»å½•çš„ç”¨æˆ·
            checkUser();
            
            // å¦‚æœæ²¡æœ‰ç”¨æˆ·ï¼Œèšç„¦åˆ°ç”¨æˆ·åè¾“å…¥æ¡†
            if (!currentUserName) {
                const usernameInput = document.getElementById('usernameInput');
                if (usernameInput) {
                    usernameInput.focus();
                }
            }
        });
    </script>
</body>
</html>
